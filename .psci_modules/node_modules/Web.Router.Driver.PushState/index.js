"use strict";
var Data_Functor = require("../Data.Functor/index.js");
var Effect = require("../Effect/index.js");
var Foreign = require("../Foreign/index.js");
var Routing_PushState = require("../Routing.PushState/index.js");
var makeDriver_ = function (dictFoldable) {
    return function (parser) {
        return function (printer) {
            return function ($$interface) {
                return {
                    initialize: function (k) {
                        return Routing_PushState.matchesWith(dictFoldable)(parser)(function (v) {
                            return k;
                        })($$interface);
                    },
                    navigate: (function () {
                        var $3 = $$interface.pushState(Foreign.unsafeToForeign({}));
                        return function ($4) {
                            return $3(printer($4));
                        };
                    })(),
                    redirect: (function () {
                        var $5 = $$interface.replaceState(Foreign.unsafeToForeign({}));
                        return function ($6) {
                            return $5(printer($6));
                        };
                    })()
                };
            };
        };
    };
};
var makeDriver = function (dictFoldable) {
    return function (parser) {
        return function (printer) {
            return Data_Functor.map(Effect.functorEffect)(makeDriver_(dictFoldable)(parser)(printer))(Routing_PushState.makeInterface);
        };
    };
};
module.exports = {
    makeDriver: makeDriver,
    makeDriver_: makeDriver_
};
